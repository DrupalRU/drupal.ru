#block-advanced-sphinx-searchbox {
  &, > form {
    &, > div {
      &, > .input-group {
        width: 100%;
      }
    }
  }

  form:hover {
    .search-sphinx:not(:focus) {
      +button {
        background: @navbar-default-link-hover-bg;

        @media @tablet {
          .box-shadow(inset 0 2px 0 0 @nav-item-active-border);
          .transition(box-shadow @transition-speed);
        }
      }
    }
  }

  .search-sphinx {
    &:extend(.navbar-nav > li > a);
    height: 100%;
    border: none;
    position: absolute;
    right: 0;
    z-index: 1;
    max-width: initial;
    width: 100%;
    .transition(~'width @{transition-speed}, background @{transition-speed}');

    &:focus {
      background: @body-bg;
      border-top-color: @brand-accent;
      .placeholder(@gray-light);
      + button {
        .button-variant(@body-bg, @brand-accent, darken(@brand-accent, @tone));

        + label {
          left: 100%;
        }
      }
    }
    @media @tablet {
      background: transparent;
      .placeholder(transparent);
    }
  }

  .btn {
    &:extend(.navbar-nav > li > a);
    border: none;
    background: @little-darker;
    z-index: 2;
    position: relative;
    .transition(background @transition-speed);

    // Disallow overlay of label at the button in next states.
    &:focus{
      background-color: @navbar-default-link-hover-bg;
      outline: none;
      + label {
        display: none;
      }
      @media @tablet {
        .box-shadow(inset 0 2px 0 0 @nav-item-active-border);
      }
    }
  }

  label {
    position: absolute;
    z-index: 3;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    margin: 0;
    cursor: pointer;
    max-width: initial;
    .transition(all @transition-speed);
  }

  @media @phone-only {
    .search-sphinx {
      &:focus {
        + .btn {
          .button-variant(@body-bg, @brand-accent, darken(@brand-accent, @tone));
        }
      }
    }

    .btn {
      background-color: darken(@brand-primary, 5%);
    }

    label {
      left: 100%;
    }
  }

  @media @tablet {
    .search-sphinx {
      &:focus {
        width: 27em;
      }
    }
  }
}
