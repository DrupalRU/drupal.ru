#block-advanced-sphinx-searchbox {
  &, > form {
    &, > div {
      &, > .input-group {
        width: 100%;
      }
    }
  }

  form:hover {
    .search-sphinx:not(:focus) {
      +button {
        background: @navbar-default-link-hover-bg;
      }
    }
  }

  .search-sphinx {
    &:extend(.navbar-nav > li > a);
    height: 38px;
    border: none;
    position: absolute;
    right: 0;
    z-index: 1;
    max-width: initial;
    width: 100%;
    .transition(~'width @{transition-speed}, background @{transition-speed}');

    &:focus {
      background: @body-bg;
      border-top-color: @brand-accent;
      + button {
        .button-variant(@body-bg, @brand-accent, darken(@brand-accent, @tone));

        + label {
          left: 100%;
        }
      }
    }
    @media @tablet {
      background: transparent;
      border-top: 2px solid transparent;
    }
  }

  .btn {
    &:extend(.navbar-nav > li > a);
    border: none;
    background: desaturate(darken(@navbar-default-bg, @tone), @tone);
    z-index: 2;
    position: relative;
    .transition(background @transition-speed);

    // Disallow overlay of label at the button in next states.
    &:focus, &:hover, &:active {
      background-color: @navbar-default-link-hover-bg;
      + label {
        display: none;
      }
    }
  }

  label {
    position: absolute;
    z-index: 3;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    margin: 0;
    cursor: pointer;
    max-width: initial;
    .transition(all @transition-speed);

    &:hover, &:focus {
      .box-shadow(inset 0 2px 0 0 @nav-item-active-border);
    }
  }

  @media screen and (max-width: @screen-sm-min) {
    .search-sphinx {
      border-left: 2px solid @navbar-default-bg;
      &:focus {
        + .btn {
          .button-variant(@body-bg, @brand-accent, darken(@brand-accent, @tone));
        }
      }
    }

    .btn {
      background-color: darken(@brand-primary, 5%);
    }

    label {
      left: 100%;
    }
  }

  @media @very-smalld {
    .search-sphinx {
      height: 50px;
    }
  }

  @media @tablet {
    .search-sphinx {
      &:focus {
        width: 27em;
      }
    }
  }
}
